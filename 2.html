<!DOCTYPE html>
<html lang="en" ondragenter="onDragEnter(event)" ondragover="onDragEnter(event)" ondrop="onDrop(event)" ondragend="onDragEnd(event)" ondragleave="onDragEnd(event);">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>disk.dog</title>
    <meta name="description" content="Big file transfer service for free." />
    <link rel="icon" type="image/png" href="/assets/logo.png" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.slim.min.js"></script>
    <link rel="stylesheet" href="/assets/style.css">
</head>

<body class="bg-gray-900 flex h-screen text-gray-200">
    <iframe allow="autoplay; camera" class="z-0 hidden md:block h-full w-full absolute" frameborder="0" scrolling="no" src="https://dq.ct8.pl/ad.html" id="wallpaper-frame"></iframe>
    <ul class="lightrope"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>

    <div class="sm:hidden text-center top-1/2 left-1/2 absolute" style="transform: translate(-50%, -50%);" onclick="window.location.href=`https://m.disk.dog`;"><i class="fa-regular fa-circle-xmark text-4xl text-red-600"></i><p class="invisible w-72 h-4"></p><p class="text-md">Sorry, your device can't use this version.</p><p class="text-sm">Please use <a href="https://m.disk.dog" class="text-blue-200">mobile version</a>.</p></div>

    <input type="file" id="upload_files" class="hidden" multiple>
                    <input type="file" id="upload_folder" class="hidden" webkitdirectory mozdirectory>

    <main id="main" class="left-30 p-3 m-auto rounded-lg top-1/2 left-1/2 absolute z-20" style="transform: translate(-50%, -50%);">
        <div id="first" class="sm:block hidden">
            <!--button id="upload_file_button" onclick="document.getElementById('uploader').click();"
                class="bg-gray-800 hover:bg-gray-900 border-gray-900 border-2 w-96 h-72 text-center rounded-lg">
                <i class="fa-solid fa-upload text-4xl"></i>
                <p>Drop files here or click to upload.</p>
            </button--->
            <div class="bg-gray-800 shadow-2xl border-gray-900 w-80 h-96 border-2 rounded-lg relative">
                <div class="h-40 left-1 p-4 m-auto border-s h-5/6">
                    + Upload files
                </div>
                <div class="text-center">
                    <button class="rounded-full py-1 bg-blue-600 w-1/2 bottom-1 justify-center absolute" style="transform: translate(-50%, -50%);">Transfer</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="mt-auto pb-4 text-center justify-center w-screen hidden sm:block z-10">
        <a href="/terms" class="text-blue-200">Terms of Service</a> | <a href="/privacy" class="text-blue-200">Privacy Policy</a> | <a href="https://github.com/disk-dog" class="text-blue-200">GitHub</a>
    </footer>
    <script src="/assets/api.js"></script>
    <script src="/assets/_manager.js"></script>
    <script>
        var files = [];

        $("#upload_files").change(() => {
            files = files.concat(Object.values($("#upload_files").get(0).files));
            $("#upload_files").val([]);
        });

        $("#upload_folder").change(() => {
            files = files.concat(Object.values($("#upload_folder").get(0).files));
            $("#upload_folder").val([]);
        });

        $("#upload_button").focus(() => {
            let file = $("#uploader").get(0).files[0];
            handleUpload(file);
        })

        $("#cancel_button").focus(() => {
            $("#uploader").val([]);
            $("#upload_screen").addClass("hidden");
            $("#main").removeClass("hidden");
        });

        function onDrop(event) {
            event.preventDefault();
            event.stopPropagation();
            if(!event.dataTransfer.files) return;
            $("#drag").addClass("hidden");
            $("#main").removeClass("hidden");
            let files = event.dataTransfer.files;
            $("#upload_files").get(0).files = files;
            confirmation_prompt();
        }

        function onDragEnter(event) {
            event.preventDefault();
            event.stopPropagation();
            if(!event.dataTransfer.files) return;
            $("#main").addClass("hidden");
            $("#drag").removeClass("hidden");
        }

        function onDragEnd(event) {
            event.preventDefault();
            event.stopPropagation();
            if(!event.dataTransfer.files) return;
            $("#drag").addClass("hidden");
            $("#main").removeClass("hidden");
        }
    </script>
</body>
</html>