<!doctype html>
<!--
    disk.dog is a big file transfer service
    Copyright (C) 2021 DomeQdev
    Copyright (C) 2021 AKurushimi

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="men">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>disk.dog</title>
        <link href="src/css/styles.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="icon" type="image/png" href="./src/images/logo.png" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.slim.min.js" integrity="sha512-6ORWJX/LrnSjBzwefdNUyLCMTIsGoNP6NftMy2UAm1JBm6PRZCO1d7OHBStWpVFZLO+RerTvqX/Z9mBFfCJZ4A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    </head>
    <body class="bg-gray-900 flex h-screen text-gray-200">

        <!-- top stuff -->
        <div class="z-30">
            <img class="absolute w-auto h-20 ml-4 " src="./src/images/logo.png" alt="logo">
            <button id="settings_modal_show_button" class="absolute inset-y-0 right-3 p-4 max-h-16"><i class="fas fa-cog"></i></button>
        </div>
        <!-- top stuff -->

        <!--center stuff-->
        <div class="m-auto text-center rounded-lg z-30">
            <div class="bg-gray-800 p-3 m-auto rounded-lg">
                <div id="main">
                    <button id="clickable_upload" class="bg-gray-800 hover:bg-gray-900 border-gray-900 border-2 w-96 h-72 text-center rounded-lg">click here to upload</button>
                </div>
            <div class="mt-3 text-center hidden" id="upload_screen">
                <!-- <h3 class="text-lg leading-6 font-medium text-gray-200">upload file</h3> -->
                <div class="mt-2 px-3 py-3 grid grid-cols-2 grid-rows-none divide-x-2 divide-gray-400" id="upload_div">
                    <div>
                        <p class="text-9xl"><i id="file_icon" class="fa-solid"></i></p>
                        <p class="dz-filename" id="file_name"></p>
                        <p class="dz-size" id="file_size"></p>
                    </div>
                    <div id="input_div">
                        <p class="px-2 py-2">password:</p>
                        <!-- <button id="show_password" class="p-3 rounded-lg active:bg-gray-900 hover:bg-gray-500"><i id="show_password_text" class="fas fa-eye"></i></button> -->
                        <input type="password" placeholder="*optional*" id="password_field" class="bg-gray-900 text-center rounded-lg input_thing w-44">
                        <p class="px-2 py-2">duration:</p>
                        <select id="duration_selector" class="bg-gray-900 text-center rounded-lg input_thing w-44">
                            <option value="3600">1 hour</option>
                            <option value="7200">2 hours</option>
                            <option value="21600">6 hours</option>
                            <option value="43200">12 hours</option>
                            <option value="86400">1 day</option>
                            <option value="172800">2 days</option>
                            <option value="259200">3 days</option>
                        </select>
                        <p class="px-2 py-2">region:</p>
                        <select id="region_selector" class="bg-gray-900 text-center rounded-lg input_thing w-44">
                            <option value="au">Australia</option>
                            <option value="eu">Europe</option>
                            <option value="us">USA</option>
                        </select>

                        <button id="upload_button" class="px-4 py-2 bg-gray-600 text-white text-base font-medium rounded-md w-full shadow-sm hover:border-2 hover:border-gray-900 hover:bg-gray-500 focus:bg-gray-900 focus:outline-none">
                            upload
                        </button>
                        <button>kenkel</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- center stuff -->

        <!-- upload modal -->
        <div class="fixed hidden inset-0 bg-gray-700 bg-opacity-75 overflow-y-auto h-full w-full z-50" id="upload_modal">
            <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-gray-800 border-gray-900">
            </div>
        </div>
        <!-- upload modal -->

        <!-- footer -->
        <div class="text-center bottom-3 inset-x-0 absolute z-40">
            <p>&copy; <a href="https://github.com/AKurushimi" class="text-blue-200">AKurushimi</a>, <a href="https://github.com/DomeQdev" class="text-blue-200">DomeQdev</a> - 2021</p>
        </div>
        <!-- footer -->

        <script>
         // i don't do js programming so sorry if anything's really badly done p_p - akurushimi

         // $("#settings_modal_show_button").click(function () {
         //     $("#settings_modal").removeClass("hidden").addClass("block");
         // });

         let settings_things = document.getElementById("input_div").querySelectorAll(".input_thing");

         if ( localStorage.getItem('password') )
             settings_things[0].value = localStorage.getItem('password');
         if ( localStorage.getItem('duration') )
             settings_things[1].value = localStorage.getItem('duration');
         if ( localStorage.getItem('region') )
             settings_things[2].value = localStorage.getItem('region');
         //
         //          $("#save_button").focus(function (){
         //              localStorage.setItem('password', settings_things[0].value);
         //              localStorage.setItem('duration', settings_things[1].value);
         //              localStorage.setItem('region', settings_things[2].value);
         //          });

         $("#show_password").mousedown(function(){
             $(this).prev().prop('type','text');
             $("#show_password_text").removeClass("fa-eye").addClass("fa-eye-slash");
         }).mouseup(function(){
             $(this).prev().prop('type','password');
             $("#show_password_text").removeClass("fa-eye-slash").addClass("fa-eye");
         }).mouseout(function(){
             $(this).prev().prop('type','password');
             $("#show_password_text").removeClass("fa-eye-slash").addClass("fa-eye");
         });

         function confirmation_prompt() {
             $("#upload_screen").removeClass("hidden");
             $("#main").addClass("hidden");
             // $("#file_name").text($("#file_upload").get(0).files[0].name)
             // let file_size = $("#file_upload").get(0).files[0].size;
             // let file_size_out;
             // if ( file_size < 1000 ) {
             //     file_size_out = `${file_size}B`
             // } else if ( file_size < 1000000 ) {
             //     file_size_out = `${Number(file_size / 1000).toFixed(2)}KB`
             // } else if ( file_size < 1000000000 ) {
             //     file_size_out = `${Number(file_size / 1000000).toFixed(2)}MB`
             // } else {
             //     file_size_out = `${Number(file_size / 1000000000).toFixed(2)}GB`
             // }
             // $("#file_size").text(file_size_out)
             //
             //              $("#file_icon").removeClass().addClass("fa-solid");
             //              let file_extension = $("#file_name").text().split(".")
             //              file_extension = file_extension[file_extension.length - 1]
             //              let file_type = $("#file_upload").get(0).files[0].type
             //              if ( file_type.includes("image") )
             //                  $("#file_icon").addClass("fa-file-image");
             //              else if ( file_type.includes("audio") )
             //                  $("#file_icon").addClass("fa-file-audio");
             //              else if ( file_type.includes("video") )
             //                  $("#file_icon").addClass("fa-file-video");
             //              else if ( file_type.includes("text") )
             //                  $("#file_icon").addClass("fa-file-lines");
             //              else
             //                  $("#file_icon").addClass("fa-file");
         };

         $("#upload_button").focus(function() {
             $("#file_upload").val([]);
             console.debug("files removed");
             $("#upload_screen").addClass("hidden");
             console.debug("upload details hidden");
             $("#main").removeClass("hidden");
             console.debug("main screen shown")
         });

        </script>
    </body>
</html>
